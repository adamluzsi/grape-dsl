refactor doc generation logic with description logic
